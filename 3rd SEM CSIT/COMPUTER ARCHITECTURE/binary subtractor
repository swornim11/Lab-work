LIBRARY ieee;
USE ieee.std_logic_1164.ALL;
USE ieee.std_logic_unsigned.ALL;

ENTITY binarysub_swornim IS
    PORT (
        A      : IN  STD_LOGIC_VECTOR (3 DOWNTO 0);
        B      : IN  STD_LOGIC_VECTOR (3 DOWNTO 0);
        Diff   : OUT STD_LOGIC_VECTOR (3 DOWNTO 0);
        Borrow : OUT STD_LOGIC
    );
END binarysub_swornim ;

ARCHITECTURE Behavioral OF binarysub_swornim  IS
    SIGNAL B_twos_complement : STD_LOGIC_VECTOR (3 DOWNTO 0);
BEGIN
    -- Compute 2's complement of B
    B_twos_complement <= (NOT B) + 1;

    PROCESS (A, B_twos_complement)
        VARIABLE Temp : STD_LOGIC_VECTOR (4 DOWNTO 0);
    BEGIN
        Temp := ('0' & A) + ('0' & B_twos_complement);
        Diff   <= Temp(3 DOWNTO 0);
        Borrow <= NOT Temp(4); -- Borrow occurs if carry = 0
    END PROCESS;
END Behavioral;
